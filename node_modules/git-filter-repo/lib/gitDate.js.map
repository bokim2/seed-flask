{"version":3,"sources":["../src/gitDate.ts"],"names":["GitDate","gitDate","dateArr","split","gitTimezone","length","timezone","timezoneFromGitTimezone","Number","gitTimezoneArr","timezoneStr","Error","timezoneArr","substr","sign","hours","minutes","Time","Minute","Math","abs","floor","Hour","toString","padStart","gitTimezoneFromTimezone"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;MAIqBA,O;;;;;;;aACnB,yBAAgBC,OAAhB,EAA0C;AACxC,YAAMC,OAAO,GAAGD,OAAO,CAACE,KAAR,CAAc,GAAd,CAAhB;AACA,YAAMC,WAAW,GAAGF,OAAO,CAACG,MAAR,GAAiB,CAAjB,GAAqBH,OAAO,CAAC,CAAD,CAA5B,GAAkC,OAAtD;AACA,YAAMI,QAAQ,GAAG,KAAKC,uBAAL,CAA6BH,WAA7B,CAAjB;AACA,eAAO,CAACI,MAAM,CAACN,OAAO,CAAC,CAAD,CAAR,CAAP,EAAqBI,QAArB,CAAP;AACD;;;aAED,iCAAwBF,WAAxB,EAAuD;AACrD,YAAMK,cAAc,GAAGL,WAAW,CAACD,KAAZ,CAAkB,GAAlB,CAAvB;AACA,YAAIO,WAAW,GACbD,cAAc,CAACJ,MAAf,GAAwB,CAAxB,GACII,cAAc,CAAC,CAAD,CAAd,GAAoBA,cAAc,CAAC,CAAD,CADtC,GAEIA,cAAc,CAAC,CAAD,CAHpB;AAIAC,QAAAA,WAAW,GAAGA,WAAW,CAACL,MAAZ,GAAqB,CAArB,cAA6BK,WAA7B,IAA6CA,WAA3D;;AACA,YACGA,WAAW,CAAC,CAAD,CAAX,KAAmB,GAAnB,IAA0BA,WAAW,CAAC,CAAD,CAAX,KAAmB,GAA9C,IACAA,WAAW,CAACL,MAAZ,GAAqB,CAFvB,EAGE;AACA,gBAAM,IAAIM,KAAJ,WAAaP,WAAb,iCAAN;AACD;;AACD,YAAMQ,WAAW,GAAG,CAClBJ,MAAM,WAAIE,WAAW,CAAC,CAAD,CAAf,OADY,EAElBF,MAAM,CAACE,WAAW,CAACG,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB,CAAD,CAFY,EAGlBL,MAAM,CAACE,WAAW,CAACG,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB,CAAD,CAHY,CAApB;AAKA,YAAOC,IAAP,GAA+BF,WAA/B;AAAA,YAAaG,KAAb,GAA+BH,WAA/B;AAAA,YAAoBI,OAApB,GAA+BJ,WAA/B;AACA,eAAO,CAACG,KAAK,GAAG,EAAR,GAAaC,OAAd,IAAyBC,eAAKC,MAA9B,GAAuCJ,IAA9C;AACD;;;aAED,iCAAwBR,QAAxB,EAAoD;AAClD,YAAMS,KAAK,GAAGI,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,KAAL,CAAWf,QAAQ,GAAGW,eAAKK,IAA3B,CAAT,CAAd;AACA,YAAMN,OAAO,GAAGG,IAAI,CAACC,GAAL,CAASD,IAAI,CAACE,KAAL,CAAYf,QAAQ,GAAGW,eAAKC,MAAjB,GAA2B,EAAtC,CAAT,CAAhB;AACA,yBAAUZ,QAAQ,GAAG,CAAX,GAAe,GAAf,GAAqB,GAA/B,SAAqCS,KAAK,CACvCQ,QADkC,GAElCC,QAFkC,CAEzB,CAFyB,EAEtB,GAFsB,CAArC,SAEsBR,OAAO,CAACO,QAAR,GAAmBC,QAAnB,CAA4B,CAA5B,EAA+B,GAA/B,CAFtB;AAGD;;;aAED,yBAAgBtB,OAAhB,EAA0C;AACxC,YAAME,WAAW,GAAG,KAAKqB,uBAAL,CAA6BvB,OAAO,CAAC,CAAD,CAApC,CAApB;AACA,yBAAUA,OAAO,CAAC,CAAD,CAAjB,cAAwBE,WAAxB;AACD","sourcesContent":["/**\n * Copyright 2021 Silicon Hills LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Timezone, Time, DateArr } from 'kiss-date';\n\nexport default class GitDate {\n  dateFromGitDate(gitDate: string): DateArr {\n    const dateArr = gitDate.split(' ');\n    const gitTimezone = dateArr.length > 1 ? dateArr[1] : '+0000';\n    const timezone = this.timezoneFromGitTimezone(gitTimezone);\n    return [Number(dateArr[0]), timezone];\n  }\n\n  timezoneFromGitTimezone(gitTimezone: string): Timezone {\n    const gitTimezoneArr = gitTimezone.split(':');\n    let timezoneStr =\n      gitTimezoneArr.length > 1\n        ? gitTimezoneArr[0] + gitTimezoneArr[1]\n        : gitTimezoneArr[0];\n    timezoneStr = timezoneStr.length < 5 ? `+${timezoneStr}` : timezoneStr;\n    if (\n      (timezoneStr[0] !== '+' && timezoneStr[0] !== '-') ||\n      timezoneStr.length < 5\n    ) {\n      throw new Error(`${gitTimezone} is an invalid git timezone`);\n    }\n    const timezoneArr = [\n      Number(`${timezoneStr[0]}1`),\n      Number(timezoneStr.substr(1, 2)),\n      Number(timezoneStr.substr(3, 2))\n    ];\n    const [sign, hours, minutes] = timezoneArr;\n    return (hours * 60 + minutes) * Time.Minute * sign;\n  }\n\n  gitTimezoneFromTimezone(timezone: Timezone): string {\n    const hours = Math.abs(Math.floor(timezone / Time.Hour));\n    const minutes = Math.abs(Math.floor((timezone / Time.Minute) % 60));\n    return `${timezone < 0 ? '-' : '+'}${hours\n      .toString()\n      .padStart(2, '0')}${minutes.toString().padStart(2, '0')}`;\n  }\n\n  gitDateFromDate(dateArr: DateArr): string {\n    const gitTimezone = this.gitTimezoneFromTimezone(dateArr[1]);\n    return `${dateArr[0]} ${gitTimezone}`;\n  }\n}\n"],"file":"gitDate.js"}